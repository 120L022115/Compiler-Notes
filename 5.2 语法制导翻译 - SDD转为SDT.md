#### 5.2 语法制导翻译 - SDD转为SDT

1. S-SDD转换为SDT
   将每个语义动作都放在产生式的最后。（无需考虑位置，因此代码实现时只需要在归约时进行语义动作即可）
   执行时需要新加value栈，value存放多个属性。
   将产生式中的语义动作抽象为可具体执行的栈操作。（需要明确每个文法符号的栈中位置）
   只需要自底向上进行翻译即可。
2. L-SDD转换为SDT
   将计算A的继承属性的动作放在A出现之前
   将计算左部的综合属性的动作放在产生式最后
   与S-SDD不同，需要额外记录位置 $\to$ 将动作也视为一个特殊的文法符号，加入到语法树中。
3. 自顶向下翻译L-SDD

   1. 非递归LL分析

      1. 新加栈，存放属性值
      2. 终结符（综合）属性存放在栈的自身值中。
      3. 非终结符要分为两个item分别压栈：综合属性先压栈，继承属性后压栈
      4. 动作认为为一个文法符号，值存动作函数指针
      5. 将产生式中的语义动作抽象为可具体执行的栈操作。（需要明确每个文法符号的栈中位置）
      6. 综合记录出栈，要将综合属性值复制给栈后面特定的语义动作
      7. 变量展开时，如果含有继承属性，要把继承属性复制给使用到的语义动作
      8. 每个语义动作也要操作栈指针，注意计算出栈和进栈的数量的总和

   2. 递归LL分析

      1. 函数的返回值为综合属性值集合、形参为继承属性集合。
      2. 对产生式右部的每个属性都要设置局部变量，将产生式动作中的计算替换为相应变量的计算。

4. 自底向上的L-SDD LR分析
   修改LL文法为LR文法：
   1. 构造L-SDT
   2. 将语义动作移至产生式末尾：对每一个内嵌的语义动作，引入一个不同的非终结符替换它，加入一个新的空产生式，该语义动作就在最后了。
   3. 在替换内嵌语义动作时，动作使用的属性需要复制给新非终结符的继承属性，语义动作的返回值需要赋值给新非终结符的综合属性——在之后修改为栈操作时，对应了后续非终结符的继承属性（本身也是对其赋值，但不在一个产生式无法操作，等到有了栈就可以操作了）。
